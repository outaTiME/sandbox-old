/*!
*              __     _
*   _    _/__  /./|,//_`
*  /_//_// /_|///  //_, v.0.8.0
*
* Copyright (c) 2012 outaTiME, Inc.
*/
function initialize(a){function g(){$("#home #box .overlay").show()}function h(){$("#home #box .overlay").hide()}function j(a){var b=$("section#"+a+" .page-header h1 span"),c=$("section#"+a+" div.page-header").outerWidth()-$("section#"+a+" div.page-header i").outerWidth()-$("section#"+a+" div.page-header button").outerWidth()-9-18;b.width(c)}function v(a,b){a.removeClass("in"),a.removeClass("out"),b===!0?a.addClass("in"):a.addClass("out")}function w(a){var b=[];l=new google.maps.LatLngBounds;for(var c=0;c<a.getLength();c++){var d=a.getAt(c);l.extend(d),b.push(d)}o.setPath(b)}function x(){n=new google.maps.Map(document.getElementById("map-bounds"),{zoom:10,center:l.getCenter(),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,zoomControl:!0,minZoom:4}),n.fitBounds(l);var a={strokeWeight:0,fillOpacity:.45,editable:!0},b=new google.maps.drawing.DrawingManager({drawingControl:!1,drawingControlOptions:{drawingModes:[google.maps.drawing.OverlayType.POLYGON]},polylineOptions:{editable:!0},polygonOptions:a,map:n}),c=new google.maps.Polygon({paths:p,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,editable:!0});c.setMap(n),google.maps.event.addListener(c.getPath(),"insert_at",function(a){w(this)}),google.maps.event.addListener(c.getPath(),"remove_at",function(a){w(this)}),google.maps.event.addListener(c.getPath(),"set_at",function(a){w(this)})}var b,c=function(a,c){a=a||b||"#place_locator",$(".tab-pane.active").scrollTo(a,400,{easing:"easeOutExpo",onAfter:c||$.noop}),b=a},d=!1,e=$(window),f=$("#box");if(!Modernizr.flexbox&&!Modernizr["flexbox-legacy"]){var i=f.closest(".container");f.bind("center",function(){var a=e.height()-i.height(),b=Math.floor(a/2);b>0&&i.css({marginTop:b})}).trigger("center"),e.resize(function(){$.doTimeout("resize",250,function(){f.trigger("center")})})}j("view"),e.resize(function(){$.doTimeout("resize",250,function(){j("view")})}),$("#map").height($("#1").outerHeight()-$("#view .page-header").outerHeight()-18-4);var k,l=new google.maps.LatLngBounds,m,n,o,p=[],q=a;if(q.length>0){var r=q[0].points;if(r.length>0)for(var s=0;s<r.length;s++){var t=r[s],u=new google.maps.LatLng(t.lat,t.lng);p.push(u),l.extend(u)}}$("#home form").submit(function(a){var b=!1;$("form .control-group").removeClass("error"),a.preventDefault(),g(),$("form :input:visible:enabled:first").blur();var d=$("form .area"),e=$("form button"),f=$("#search #keywords");$.ajax({type:"GET",url:"/address",data:{keywords:f.val(),bounds:l.getNorthEast().lat()+","+l.getNorthEast().lng()+"|"+l.getSouthWest().lat()+","+l.getSouthWest().lng()},error:function(a,b){},success:function(a,d,e){a=$.parseJSON(a);var f=a.results;for(var g=0;g<f.length;g++){var i=f[g],j=i.types[0],n=i.geometry.location,o=new google.maps.LatLng(n.lat,n.lng),p=$("section#view h1 span"),q=$("section#view #map");k?k.setPosition(o):k=new google.maps.Marker({position:o,map:m,clickable:!1}),p.text(a.results[0].formatted_address);var r=l.contains(o);v(p,r),v(q,r);if(r)m.setCenter(o),m.setZoom(16);else{var s=new google.maps.LatLngBounds(l.getSouthWest(),l.getNorthEast());s.extend(o);var t=google.maps.geometry.spherical.computeDistanceBetween(l.getCenter(),o)/1e3;t>1500?(m.setCenter(o),m.setZoom(6)):m.fitBounds(s)}h(),c("#view"),b=!0;break}b===!1&&(h(),$("form .control-group").addClass("error"),$("form :input:visible:enabled:first").select().focus())}})}),$("body").on("click","#btn-back",function(a){var b=$("form .area"),d=$("form button"),e=$("#search #keywords");c("#place_locator",function(){$("form :input:visible:enabled:first").select().focus()})}),$("body").on("click","#btn-save",function(a){g();var b=[],c=o.getPath();for(var d=0;d<c.getLength();d++){var e=c.getAt(d);b.push({lat:e.lat(),lng:e.lng()})}$.ajax({type:"POST",url:"/bounds",dataType:"json",data:{bounds:[{points:b}]},error:function(a,b){},success:function(a,b,c){},complete:function(a,b){setTimeout(h,1e3)}})}),$("body").on("click",".nav-tabs a[data-toggle='tab']",function(a){var b=$(this).attr("href"),e=$("form .area"),f=$("form button"),g=$("#search #keywords");b==="#2"?(d===!1&&($("#map-bounds").height($("#2").outerHeight()-$("#2 .page-header").outerHeight()-18-4),d=!0,x()),google.maps.event.trigger(n,"resize")):(google.maps.event.trigger(m,"resize"),c("#place_locator",function(){$("form :input:visible:enabled:first").select().focus()}))}),function(){m=new google.maps.Map(document.getElementById("map"),{zoom:16,center:l.getCenter(),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,zoomControl:!0,minZoom:4}),o=new google.maps.Polygon({paths:p,strokeColor:"#0000FF",strokeOpacity:.6,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.15,clickable:!1}),o.setMap(m),$("form :input:visible:enabled:first").select().focus()}()}(function(a){function e(c){function n(){c?f.removeData(c):k&&delete b[k]}function o(){g.id=setTimeout(function(){g.fn()},l)}var e=this,f,g={},h=c?a.fn:a,i=arguments,j=4,k=i[1],l=i[2],m=i[3];typeof k!="string"&&(j--,k=c=0,l=i[1],m=i[2]),c?(f=e.eq(0),f.data(c,g=f.data(c)||{})):k&&(g=b[k]||(b[k]={})),g.id&&clearTimeout(g.id),delete g.id;if(m)g.fn=function(a){typeof m=="string"&&(m=h[m]),m.apply(e,d.call(i,j))===!0&&!a?o():n()},o();else{if(g.fn)return l===undefined?n():g.fn(l===!1),!0;n()}}var b={},c="doTimeout",d=Array.prototype.slice;a[c]=function(){return e.apply(window,[0].concat(d.call(arguments)))},a.fn[c]=function(){var a=d.call(arguments),b=e.apply(this,[c+a[0]].concat(a));return typeof a[0]=="number"||typeof a[1]=="number"?this:b}})(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?jQuery.easing.easeInBounce(a,b*2,0,d,e)*.5+c:jQuery.easing.easeOutBounce(a,b*2-e,0,d,e)*.5+d*.5+c}}),function(a){function c(a){return typeof a=="object"?a:{top:a,left:a}}var b=a.scrollTo=function(b,c,e){a(window).scrollTo(b,c,e)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},b.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!c)return b;var e=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||e.compatMode=="BackCompat"?e.body:e.documentElement})},a.fn.scrollTo=function(e,f,g){return typeof f=="object"&&(g=f,f=0),typeof g=="function"&&(g={onAfter:g}),e=="max"&&(e=9e9),g=a.extend({},b.defaults,g),f=f||g.speed||g.duration,g.queue=g.queue&&g.axis.length>1,g.queue&&(f/=2),g.offset=c(g.offset),g.over=c(g.over),this._scrollable().each(function(){function r(a){i.animate(o,f,g.easing,a&&function(){a.call(this,e,g)})}var h=this,i=a(h),l=e,m,o={},q=i.is("html,body");switch(typeof l){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(l)){l=c(l);break}l=a(l,this);case"object":if(l.is||l.style)m=(l=a(l)).offset()}a.each(g.axis.split(""),function(a,c){var d=c=="x"?"Left":"Top",e=d.toLowerCase(),f="scroll"+d,j=h[f],n=b.max(h,c);if(m)o[f]=m[e]+(q?0:j-i.offset()[e]),g.margin&&(o[f]-=parseInt(l.css("margin"+d))||0,o[f]-=parseInt(l.css("border"+d+"Width"))||0),o[f]+=g.offset[e]||0,g.over[e]&&(o[f]+=l[c=="x"?"width":"height"]()*g.over[e]);else{var p=l[e];o[f]=p.slice&&p.slice(-1)=="%"?parseFloat(p)/100*n:p}/^\d+$/.test(o[f])&&(o[f]=o[f]<=0?0:Math.min(o[f],n)),!a&&g.queue&&(j!=o[f]&&r(g.onAfterFirst),delete o[f])}),r(g.onAfter)}).end()},b.max=function(b,c){var e=c=="x"?"Width":"Height",f="scroll"+e;if(!a(b).is("html,body"))return b[f]-a(b)[e.toLowerCase()]();var g="client"+e,h=b.ownerDocument.documentElement,i=b.ownerDocument.body;return Math.max(h[f],i[f])-Math.min(h[g],i[g])}}(jQuery);